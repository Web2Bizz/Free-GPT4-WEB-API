# Branch Protection Rules - –ù–∞—Å—Ç—Ä–æ–π–∫–∞

## üìã **–û–±–∑–æ—Ä**

–î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É Branch Protection Rules –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ CI/CD workflow –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## **–¶–µ–ª—å**

- –ó–∞—â–∏—Ç–∏—Ç—å `main` –≤–µ—Ç–∫—É –æ—Ç –ø—Ä—è–º—ã—Ö push
- –†–∞–∑—Ä–µ—à–∏—Ç—å merge —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Pull Request
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ dev workflow
- –ó–∞—â–∏—Ç–∏—Ç—å –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ GitHub Rulesets**

### **1. –ü–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:**
```
Repository ‚Üí Settings ‚Üí Rules ‚Üí Rulesets ‚Üí New branch ruleset
```

### **2. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Ruleset:**

#### **‚úÖ Ruleset Name:**
```
main
```

#### **‚úÖ Enforcement status:**
```
Active
```

### **3. Target branches (–¶–µ–ª–µ–≤—ã–µ –≤–µ—Ç–∫–∏):**

#### **‚úÖ Add target:**
1. –ù–∞–∂–º–∏—Ç–µ **"Add target"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Branch name"**
3. –í–≤–µ–¥–∏—Ç–µ: `main`

### **4. Rules (–ü—Ä–∞–≤–∏–ª–∞):**

#### **‚úÖ Restrict creations:**
- **–í–∫–ª—é—á–µ–Ω–æ** ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å bypass –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—Ç–∫–∏

#### **‚úÖ Restrict updates:**
- **–í–∫–ª—é—á–µ–Ω–æ** ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Pull Request

#### **‚úÖ Require pull request:**
- **–û—Ç–∫–ª—é—á–µ–Ω–æ** ‚ùå (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –∏–∑ dev)
- **–ü—Ä–∏—á–∏–Ω–∞:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ dev –ø–µ—Ä–µ–¥ merge

#### **‚úÖ Require status checks:**
- **–û—Ç–∫–ª—é—á–µ–Ω–æ** ‚ùå (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ dev –≤–µ—Ç–∫–µ)
- **–ü—Ä–∏—á–∏–Ω–∞:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ dev –ø–µ—Ä–µ–¥ merge

#### **‚úÖ Require linear history:**
- **–í–∫–ª—é—á–µ–Ω–æ** ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–ø—Ä–µ—â–∞–µ—Ç merge commits (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fast-forward merge)

#### **‚úÖ Restrict pushes that create files:**
- **–í–∫–ª—é—á–µ–Ω–æ** ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### **5. Bypass list (–°–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π):**

#### **‚úÖ Add bypass:**
1. –ù–∞–∂–º–∏—Ç–µ **"+ Add bypass"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Your username"**
3. **–†–æ–ª—å:** `Admin`
4. **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –¥–µ–ª–∞—Ç—å merge –¥–∞–∂–µ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏

### **6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã):**

#### **‚úÖ Require conversation resolution:**
- **–û—Ç–∫–ª—é—á–µ–Ω–æ** ‚ùå (–Ω–µ –Ω—É–∂–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ merge)

#### **‚úÖ Require deployments to succeed:**
- **–û—Ç–∫–ª—é—á–µ–Ω–æ** ‚ùå (—É –Ω–∞—Å –Ω–µ—Ç deployment environments)

#### **‚úÖ Lock branch:**
- **–û—Ç–∫–ª—é—á–µ–Ω–æ** ‚ùå (–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

## **–ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```
Ruleset Name: main
Enforcement: Active

Target branches:
‚îú‚îÄ‚îÄ Branch name: main

Rules:
‚îú‚îÄ‚îÄ Restrict creations ‚úÖ
‚îú‚îÄ‚îÄ Restrict updates ‚úÖ
‚îú‚îÄ‚îÄ Require pull request ‚ùå
‚îÇ   ‚îî‚îÄ‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –∏–∑ dev
‚îú‚îÄ‚îÄ Require status checks ‚ùå
‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dev –≤–µ—Ç–∫–µ
‚îú‚îÄ‚îÄ Require linear history ‚úÖ
‚îî‚îÄ‚îÄ Restrict pushes that create files ‚úÖ

Bypass list:
‚îú‚îÄ‚îÄ Your username (Admin)
‚îú‚îÄ‚îÄ github-actions[bot] (GitHub Actions)
‚îî‚îÄ‚îÄ GITHUB_TOKEN (Workflow token)
```

## **–í–∞–∂–Ω–æ: Fast-Forward Merge**

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º –ø—Ä–∞–≤–∏–ª–µ **"Require linear history"** workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **fast-forward merge** –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ merge commit. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

- ‚úÖ **–ù–µ—Ç merge commits** - –∏—Å—Ç–æ—Ä–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ–π
- ‚úÖ **–í—Å–µ –∫–æ–º–º–∏—Ç—ã –∏–∑ dev** –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ main
- ‚úÖ **–°–æ–±–ª—é–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞** Branch Protection
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** - dev –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–ø–µ—Ä–µ–¥–∏ main

### **–ï—Å–ª–∏ fast-forward –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω:**
Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç rebase dev –Ω–∞ main, –∞ –∑–∞—Ç–µ–º fast-forward merge. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rebase** - dev –ø–µ—Ä–µ–±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ main
2. **Fast-forward merge** - main –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ merge commits
3. **–õ–∏–Ω–µ–π–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** - —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ "Require linear history"
4. **–ù–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π** - –≤—Å–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### **–ê–ª–≥–æ—Ä–∏—Ç–º workflow:**
```
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–Ω–æ –ª–∏ fast-forward merge
2. –ï—Å–ª–∏ –î–ê ‚Üí –≤—ã–ø–æ–ª–Ω–∏—Ç—å fast-forward merge
3. –ï—Å–ª–∏ –ù–ï–¢ ‚Üí rebase dev –Ω–∞ main ‚Üí fast-forward merge
4. –ó–∞–ø—É—à–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π main
```

## **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

### **1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ workflow job –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
–í `deploy-dev.yml`:
```yaml
test_dev_environment:
  name: Test Development Environment  # ‚Üê –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å!
```

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- Push –≤ `dev` –≤–µ—Ç–∫—É
- Workflow –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- Job –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ merge —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ workflow
- `dev` –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–º–µ—Ä–∂–∏—Ç—å—Å—è –≤ `main`

## üö® **–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:**

### **1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ status check:**
```
‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: "Test and Deploy to Dev Environment"
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "Test Development Environment"
```

### **2. Bypass list –ø—É—Å—Ç–æ–π:**
```
‚ùå –ë–µ–∑ —ç—Ç–æ–≥–æ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å merge
‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å–µ–±—è –≤ bypass list
```

### **3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π branch name:**
```
‚ùå "main*" –∏–ª–∏ "*/main"
‚úÖ "main"
```

## **–°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏:**

### **1. Target branches:**
```
Add target ‚Üí Branch name ‚Üí main
```

### **2. Rules:**
```
Restrict creations ‚úÖ
Restrict updates ‚úÖ
Require pull request ‚úÖ
Require status checks ‚úÖ
Require linear history ‚úÖ
Restrict pushes that create files ‚úÖ
```

### **3. Bypass list:**
```
+ Add bypass ‚Üí Your username ‚Üí Admin
```

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

1. **–ü—Ä—è–º—ã–µ push –≤ `main`** –±—É–¥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
2. **Merge –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ** —á–µ—Ä–µ–∑ PR
3. **PR –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–º–µ—Ä–∂–µ–Ω** —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ dev workflow
4. **–í—ã —Å–º–æ–∂–µ—Ç–µ** –¥–µ–ª–∞—Ç—å merge (–±–ª–∞–≥–æ–¥–∞—Ä—è bypass list)
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge** –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

## **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Ruleset** —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** workflow
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**, —á—Ç–æ merge —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ production –¥–µ–ø–ª–æ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

## üìö **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**

- [GitHub Branch Protection Rules](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/about-protected-branches)
- [GitHub Rulesets](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets)
- [GitHub Actions Workflows](https://docs.github.com/en/actions/using-workflows)

---

**–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –∏ –≤–∞—à workflow –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ!** üöÄ
